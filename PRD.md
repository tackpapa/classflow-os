# 학원/러닝센터/스터디카페 통합 운영 시스템 PRD

(가칭: **ClassFlow OS**)

## 0. 제품 개요

* **목표 시장**
  * 사교육 기관: 학원, 러닝센터, 공부방
  * 공간 기반: 스터디카페, 관리형 스터디 공간

* **제품 타입**
  * SaaS (멀티테넌트) 웹 서비스
  * 운영/관리 웹 대시보드 + 학생/학부모용 경량 웹앱

* **포지션**
  * 기존: "노션 + 바티 + 폼 + 엑셀 + 카톡"을 조합해서 억지로 쓰는 구조
  * 이 제품: 위 흐름을 **한 번에 통합한 '교육 운영 자동화 OS'**

* **핵심 가치**
  1. **상담 → 등록 → 수업 → 출결 → 성적 → 정산**까지 한 흐름으로 이어지는 자동화
  2. 학원/센터 입장에서 **"사람 손이 많이 가던 반복 업무"를 최대한 없애기**
  3. 학부모에게는 **정리된 리포트와 알림**을, 강사에게는 **CRM + 수업툴**, 학생에게는 **투명한 기록** 제공

---

## 1. 문제 정의

1. 학원/센터/스터디카페/공부방 공통 문제
   * 상담, 등록, 출결, 과제 안내, 정산 등을 **전화·카톡·엑셀·종이 수기로 섞어서 관리**
   * 사람이 실수하면 바로 **매출·불만·신뢰도**로 이어짐

2. 학원/러닝센터/공부방
   * 반/학생/강사/수업/클리닉/시험이 복잡하게 얽혀 있음
   * 성적·출결·과제 데이터를 **통합해서 보는 시스템이 거의 없음**
   * 학부모 커뮤니케이션(리포트, 공지)을 일일이 수작업으로 작성

3. 스터디카페
   * 출입·좌석·시간·이용권 관리 시스템은 있지만
   * "학습 데이터"와 연결된 출결/리포트/알림 시스템은 부족

---

## 2. 목표 & 비목표

### 2.1. 제품 목표

1. **운영 자동화**
   * 상담 신청 → 캘린더 등록 → 알림톡 → 온보딩 문서 발송까지 **워크플로우 자동화**

2. **데이터 기반 운영**
   * 출결, 시험, 과제, 이용시간, 매출, 인건비를 **단일 대시보드**에서 관리

3. **커뮤니케이션 표준화**
   * 학부모·학생에게 나가는 메시지/리포트를 템플릿화 + 자동 생성

4. **멀티 포맷 커버**
   * 학원/러닝센터/스터디카페/공부방 **공통 코어 기능 + 업종별 모듈**

### 2.2. 비목표 (초기)

* LMS(온라인 강의 플랫폼) 수준의 **문제은행·동영상 강의 시스템** 구축
* 대기업 ERP 수준의 재무/세무 시스템
* 출입 하드웨어(게이트, 카드리더기) 제조/공급

---

## 3. 타겟 유저 & 페르소나

1. **원장/운영자**
   * 학원/센터/공부방/스터디카페 대표
   * 목표: 매출·수강생·만족도·강사 유지율 관리, 업무 자동화

2. **강사/스태프**
   * 수업 담당 강사, 매니저, 알바
   * 목표: 출결 확인, 수업일지/숙제/클리닉 기록, 급여 확인

3. **학부모**
   * 자녀 진도/출결/성적/태도/과제 이행 상황 확인
   * 목표: "잘 맡겼다"는 확신과 편리한 문의

4. **학생**
   * 본인 시간표/과제/클리닉 상태, 출결 기록 확인
   * 목표: 자신의 공부 기록과 목표를 쉽게 파악

---

## 4. 핵심 기능 영역

### 4.1. 조직/지점/권한 관리

**스코프**
* 멀티 지점(캠퍼스) 지원
* 역할 기반 접근 제어(RBAC)

**기능**
* 기관(테넌트) 생성
* 지점(캠퍼스) 생성
* 역할:
  * Owner (원장), Manager, Teacher, Staff, Student, Parent
* 권한:
  * 지점 별 강사/스태프 접근 제한
  * 학부모/학생은 본인(자녀) 데이터만 접근

**우선순위**: 필수(MVP)

---

### 4.2. 상담/입학/온보딩 자동화

**목표**
* 전화/카톡 상담을 **폼 + 자동화**로 줄이고,
* 상담 → 등록까지의 모든 공지/리마인드를 자동 처리

**기능**

1. **상담 신청 폼**
   * 웹 링크/QR로 접속
   * 필드: 학생 정보, 학교/학년, 관심 과목, 희망 요일/시간, 목표, 연락처 등

2. **상담 요청 DB (Supabase)**
   * 모든 폼 입력 데이터 저장
   * 상태값: 신규/상담 예정/상담 완료/등록/보류 등

3. **캘린더 연동**
   * Cloudflare Worker가 신규 상담 레코드 → Google Calendar API로 일정 생성
   * 중복/시간 충돌 체크

4. **자동 안내 메시지**
   * 상담 신청 시:
     * 학부모에게: 접수 안내 (Kakao/SMS/이메일)
     * 내부 운영자에게: 신규 상담 알림
   * 상담 하루 전:
     * 시간/위치/온라인 링크 안내 리마인드

5. **상담 후 follow-up**
   * 일정 시간 후 "등록 안내/추가 문의" 알림 자동 발송

6. **등록 확정 → 온보딩 패키지 발송**
   * 반 배정/과목/교재/시작일 반영
   * 온보딩 메시지: 시간표, 준비물, 결제 안내, 첫 수업 설명 등 자동 생성·발송

**우선순위**: 코어(MVP)

---

### 4.3. 학생/반/강사 관리 (학원/러닝센터/공부방 공통)

**목표**
* 학생–반–강사–시간표를 구조적으로 관리

**기능**

1. **학생 프로필**
   * 기본 정보, 학교/학년, 연락처, 보호자 정보
   * 목표(성적, 입시, 습관), 메모

2. **반/프로그램 DB**
   * 과목, 레벨, 요일/시간, 강의실, 정원, 교재/커리큘럼

3. **학생–반 관계**
   * 한 학생이 여러 반 수강 가능
   * 한 반에 여러 학생 배정 가능

4. **강사 프로필**
   * 기본 정보, 담당 과목/반, 급여 방식(시급/월급/비율제 등)

5. **시간표/캘린더 뷰**
   * 지점별/강사별/반별 시간표
   * 학생/학부모용 "내 시간표" 뷰

**우선순위**: 코어(MVP)

---

### 4.4. 출결/수업/클리닉 관리

**목표**
* 등원·하원, 수업 진행, 보충·클리닉을 자동 기록 + 알림

**기능**

1. **출결 체크**
   * 강사가 앱에서 출석/지각/결석/조퇴 체크
   * (추후: QR/키오스크 연동 여지)

2. **등원 예정 리스트 자동 생성**
   * 매일, 당일 등원 예정 학생 리스트 생성
   * 체크 박스 형태로 출결 처리

3. **수업일지(레슨 노트)**
   * 오늘 학습 내용, 학생 태도, 이해도, 과제, 다음 수업 계획
   * 강사가 간략 입력 → 부모용 요약 카드 자동 생성

4. **클리닉/보강 관리**
   * 시험/과제 결과 등 기준으로 클리닉 대상 자동 큐
   * 참석/미참석 상태 기록 → 부모에게 결과 안내 알림

5. **스터디카페/공부방 전용**
   * 출입 시간, 좌석, 이용 상품 정보 기록
   * 공부시간 통계(오늘/주간/월간) 제공
   * "오늘 3시간 채웠어요" 알림/배지 기능 (V2)

**우선순위**: 출결/수업일지 코어(MVP), 클리닉/시간통계는 V1~V2

---

### 4.5. 시험/성적/과제 관리

**목표**
* 시험/과제를 DB화해서 학생 성취도와 위험도 파악

**기능**

1. **시험지 DB**
   * 시험 이름, 종류(내신/모의/단원평가 등), 시행일, 학교, 범위

2. **시험 기록 DB**
   * 학생별 점수, 등급, 백분위, 과목별 세부 점수
   * 시험지 DB와 관계 연결

3. **성적 분석**
   * 학생별/반별/지점별 평균, 최고/최저
   * 과목/단원별 약점 구간 표시

4. **과제/숙제 관리**
   * 과제 제목, 유형(문제집/프린트/온라인), 마감일
   * 학생 제출(완료/미완료/파일/사진) 기록
   * 완료율, 지각률 통계

**우선순위**: 시험/성적/과제 기본 기능 V1, 고급 분석 V2

---

### 4.6. GPT 기반 피드백/리포트 자동 생성

**목표**
* 강사가 쓰던 피드백/리포트 문장을 **AI가 초안 생성 → 강사가 수정**하는 흐름

**기능**

1. **학생 피드백 초안 생성**
   * 입력 데이터:
     * 출결 기록, 시험/과제 성적, 최근 수업일지, 학생 특징
   * OpenAI API로 프롬프트 구성 → 텍스트 피드백 생성
   * 말투/톤/금지어/포맷 설정 가능(기관 단위 기본값 + 강사 override)

2. **주간/월간 학습 리포트**
   * 기간별 데이터 자동 집계
   * 구조:
     * 요약, 성취, 약점, 과제 이행률, 추천 행동
   * PDF/이미지로 변환 후 링크 제공

3. **리포트 발송**
   * 학부모/학생에게 카카오톡/이메일로 링크 발송
   * 열람 로그 기록

**우선순위**: 피드백/리포트 생성은 V1, 템플릿·프롬프트 고급 설정은 V2

---

### 4.7. 커뮤니케이션 & 자동화 엔진

**목표**
* "조건/이벤트 기반 + 스케줄 기반"으로 **문자/알림톡/메일 자동 발송**

**기능**

1. **메시지 채널**
   * KakaoTalk 알림톡(또는 상담톡), SMS, 이메일 (추후 푸시)

2. **템플릿 관리**
   * 상담 접수 안내, 상담 리마인드
   * 등록 안내, 온보딩
   * 수업/시험/클리닉 안내
   * 수강료/연체 안내
   * 급여명세 안내
   * 각 템플릿에 변수(이름, 반, 시간, 금액 등) 삽입

3. **자동화 규칙(룰 엔진)**
   * 트리거:
     * 상담 생성, 등록 확정, 수업 시작/종료, 출결 상태 변화, 시험 기록 등록, 과제 미제출 N회, 청구서 발행, 급여 확정 등
   * 조건:
     * 특정 반/과목/지점/학생 속성 등 필터
   * 액션:
     * 메시지 발송, 상태값 변경, 태그 추가

4. **스케줄러**
   * 정해진 시점/주기로 자동 실행
   * 예: "매주 일요일 20시, 다음 주 수업 시간표 안내 발송"

5. **로그 & 모니터링**
   * 발송 내역, 성공/실패, 재시도
   * 기록은 Supabase 테이블에 저장, 필터/검색 가능

**우선순위**: 템플릿 + 기본 자동화(MVP), 고급 조건/시나리오 빌더 V1~V2

---

### 4.8. 결제/청구/정산 (기본 버전)

**목표**
* 최소한의 수강료 청구/입금 확인/영수증 발송을 지원

**기능**

1. **상품/수강료 설정**
   * 반/과목/기간별 수강료 설정
   * 스터디카페: 시간제/정액제/정기권 상품 설정

2. **청구서 생성**
   * 학생/부모별 월 청구서 자동 생성
   * 수강료/할인/연체/부가 서비스 포함

3. **결제 상태 관리**
   * "발행/입금확인/연체/부분입금" 상태값
   * 상태변경 시 알림 옵션

4. **외부 PG 연동(단계적)**
   * V1: 오프라인/계좌이체 위주, 입금 확인 수동 or 파일 업로드
   * V2: 카드 자동 결제, 정기 결제 모듈 연동

**우선순위**: 청구/상태 관리 V1, PG 연동은 V2 이후

---

### 4.9. 인건비/급여 관리

**목표**
* 강사 인건비 계산과 급여명세 발송을 자동화

**기능**

1. **급여 규칙**
   * 시급제: 수업 시간 × 시급
   * 회차제: 회차 × 단가
   * 월급제/비율제(향후)

2. **수업 기록 → 인건비 계산**
   * 출결·수업일지를 기준으로 실제 수업 시간/회차 계산
   * 강사별 월별 인건비 테이블 자동 생성

3. **급여명세서 생성**
   * 월별 수업 내역·인건비·공제 항목 포함 PDF 생성
   * 링크+비밀번호 자동 생성, 만료일 설정

4. **급여명세 발송**
   * 강사별 메일/카카오톡 등으로 명세 링크 발송
   * 조회 여부 기록

**우선순위**: 규칙 기본 + 명세 생성/발송 V1

---

### 4.10. 스터디카페 전용 모듈 (모듈형)

**목표**
* 기존 출입/시간 관리 시스템이 없는 소규모 스터디카페/공부방이 쉽게 사용

**기능**

1. **좌석/룸 관리**
   * 좌석/룸 구조 등록
   * 예약 및 이용현황 표시

2. **이용 상품**
   * 시간권/정액권/정기권 설정
   * 학생 프로필과 연결

3. **출입·이용 기록**
   * 입실/퇴실 시간 기록
   * 하루/주간/월간 공부시간 통계 → 학생/학부모에게 제공

4. **알림/배지**
   * 하루 목표 시간 달성/연속 공부일 수 등 배지 부여
   * "오늘도 공부 3시간 달성했어요!" 알림

**우선순위**: V1~V2(핵심 학원 기능 이후 순차 적용)

---

## 5. UX 주요 플로우 요약

### 5.1. 학부모 – 신규 상담 → 등록

1. 링크/QR로 상담 폼 작성
2. 접수 안내 메시지 수신
3. 상담 일정 안내/리마인드 수신
4. 상담 후 등록 결정 → 온보딩 안내 수신
5. 첫 수업/시간표/준비물/결제 안내 확인

### 5.2. 강사 – 수업 운영

1. 오늘 시간표 조회
2. 수업 시작 시 출결 체크
3. 수업 종료 후 수업일지 작성
4. 과제 등록/수정
5. 필요시 GPT 버튼으로 피드백/리포트 초안 생성

### 5.3. 원장 – 운영 데이터 확인

1. 오늘 상담/등록/등원 현황 대시보드
2. 반별/강사별 출결/성적/과제 이행률
3. 월별 매출/인건비/순이익 요약
4. 자동화 알림 로그/에러 모니터링

---

## 6. 데이터 모델 (상위 엔티티)

* Organization, Branch
* User (role: owner/manager/teacher/staff/student/parent)
* Student, Parent <-> Student
* Teacher
* Class (반)
* Enrollment (Student ↔ Class)
* Schedule (시간표)
* Attendance
* LessonNote
* Homework, HomeworkSubmission
* Exam, ExamResult
* Consultation, EnrollmentRequest
* Invoice, Payment (V2)
* PayrollRule, PayrollItem, Payslip
* StudyCafeSeat, SeatBooking, UsageRecord (모듈)
* NotificationTemplate, AutomationRule, NotificationLog
* Report (리포트/피드백 저장)

---

## 7. 기술 아키텍처 & 스택

### 7.1. 프론트엔드

* **Next.js 15 (App Router)**
  * CSR + RSC 혼합
  * Cloudflare Pages(또는 Workers + open-next)로 배포

* **UI**
  * React + Tailwind + 컴포넌트 라이브러리(shadcn 등)

### 7.2. 백엔드/BFF

* **Cloudflare Workers**
  * REST/GraphQL API
  * Next.js 서버 액션이 호출하는 BFF 역할 가능
  * Scheduled Workers로 크론(알림/정산) 처리
  * Queues를 사용한 비동기 작업(알림 전송, PDF 생성, GPT 호출 등)

### 7.3. 데이터 & 인증

* **Supabase**
  * PostgreSQL (다중 테넌트: org_id 기반 RLS)
  * Supabase Auth로 이메일/소셜 로그인 + 역할 관리
  * Supabase Storage로 파일(시험지 사진, 과제, 리포트 PDF, 급여명세) 저장
  * Realtime 기능으로 대시보드 실시간 반영 가능

### 7.4. 외부 연동

* 메시지: KakaoTalk Biz, SMS 게이트웨이, 이메일(SendGrid 등)
* 캘린더: Google Calendar API
* AI: OpenAI GPT-4o 등 (텍스트, 요약, 리포트 생성)

---

## 8. 릴리즈 플랜

### MVP (0~3개월)

* 조직/지점/권한 구조
* 학생/반/강사/시간표 관리
* 상담 폼 + 상담 DB + 접수/리마인드 자동 알림(기본)
* 출결/수업일지 + 기본 과제
* 기본 자동화 엔진(트리거+템플릿+발송)
* 운영자/강사용 웹 대시보드

### V1 (3~6개월)

* 시험/성적/과제 통계
* GPT 기반 피드백/주간 리포트 생성
* 급여 규칙 + 인건비 계산 + 급여명세 PDF/링크 발송
* 학부모/학생용 경량 웹앱 (시간표/출결/리포트 확인)
* 기초 매출/인건비 대시보드

### V2 (6개월 이후)

* 스터디카페/공부방 모듈 (좌석/시간 관리)
* 고급 자동화 빌더(여러 조건, 시나리오)
* PG 연동, 정기 결제
* 고급 분석(반·강사·채널별 매출/성과, A/B 테스트 등)

---

## 9. 성공 지표 (KPI)

* 도입 기관당
  * 상담 → 등록 전환율
  * 학부모/학생 활성 사용자 수
  * 수동 발송 메시지 vs 자동 메시지 비율
  * 강사/스태프 작업 시간 감소(체감 설문)

* 제품 전체
  * 기관당 월 ARPU
  * 순이탈률(학원 기준)
  * 활성 자동화 규칙 수, 월간 발송 메시지 수
  * 월간 생성 리포트 수

---

## 10. 다음 단계

MVP 범위에서 우선순위별 개발 티켓 목록을 작성하고, 각 기능별로 상세 설계 문서를 작성합니다.
